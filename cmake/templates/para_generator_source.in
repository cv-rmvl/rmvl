/**
 * @file _rm_codegen_param.cpp
 * @author RMVL Community
 * @brief @class_name@ module source file (Generated by CMake automatically, DO NOT MODIFY!)
 * 
 * @copyright Copyright @year@ (c), RMVL Community
 * 
 */

#include <mutex>
#include <shared_mutex>
#include <unordered_map>

#include <opencv2/core/persistence.hpp>

#include "@para_include_path@"

namespace rm::para {

static std::shared_mutex g_paramtx__{};

@para_source_enum_s2t@
@para_source_enum_t2s@
bool @class_name@::read(const std::string &_path__) {
    std::shared_lock _lk__(g_paramtx__);
    cv::FileStorage _fs__(_path__, cv::FileStorage::READ);
    if (!_fs__.isOpened())
        return false;
    cv::FileNode _node__;

@para_source_read@
    return true;
}

bool @class_name@::write(const std::string &_path__) const {
    std::unique_lock _lk__(g_paramtx__);
    cv::FileStorage _fs__(_path__, cv::FileStorage::WRITE);
    if (!_fs__.isOpened())
        return false;

@para_source_write@
    return true;
}

} // rm::para
